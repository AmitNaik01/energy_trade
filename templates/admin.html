<!DOCTYPE html>
{% load static %}
<html>
<title></title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="{% static 'index.css' %}">
<body>
    <style>
                .icons56785{
            background-color: rgb(51, 51, 51);
            color: white !important;
            cursor: pointer;
        }
        .gg1 {
    padding: 20px;
    width: 80% !important;
}

.graph-title{
  color: black;
  font-size: 17px;
  font-weight: 600;
}
.earn-content{
  color: rgb(49, 194, 49);
  margin-top: 20px;
  display: flex;
  justify-content: center;
}

.canva-center{
  height: 250px;
  display: flex;
  justify-content: center;
}

.saller-dashboard-sec-section{
  display: flex;
  justify-content: space-between;
  padding: 20px;
  gap: 10px;
}

.sdss-first{
  width:30%;
  border: 1px solid rgba(128, 128, 128, 0.418);
  padding: 20px;
  border-radius: 10px;
}

.energy-saveing-ssdss-first{
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 5px;
}

.this-months-btn{
  background-color: rgb(29, 155, 29);
  color: white;
  padding: 10px 20px;
  border-radius: 5px;
}

.ssdsss-first-image{
  width: 100%;
  padding: 20px;
}

.ssdsss-first-image img{
  width: 100%;
}

.ssdss-first-content{
  text-align: center;
  color: black;
}

.sdss-sec{
  width: 33.33%;
  border: 1px solid rgba(128, 128, 128, 0.418);
  padding: 20px;
  border-radius: 10px;
}

.sdss-sec canvas{
  height: 400px;
}

.sdss-three{
  width: 36.33%;
  border: 1px solid rgba(128, 128, 128, 0.418);
  padding: 10px;
  border-radius: 10px;
}

.rec-trad-sub{
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 20px;
}

.nam-profike{
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.nam-profike img{
  width: 50px;
  height: 50px;
  border-radius: 50%;
  border: 1px solid gray;
  margin-right: 10px;
}

.profile-name p{
  margin: 0px;
}

.sold-btn p{
  background-color: rgb(31, 151, 31);
  padding: 10px;
  color: white;
}

@media screen and (max-width: 790px){
  .gg1 {
    padding: 10px;
    width: 100% !important;
}
.saller-dashboard-sec-section{
  display: block;
}
.sdss-first{
  width: 100%;
  margin-bottom: 10px;
}
.sdss-sec{
  width: 100%;
  margin-bottom: 10px;
}
.sdss-three{
  width: 100%;
}
.saller-dashboard-sec-section{
  padding: 0px;
}
.all-tiel-box-conetn {
        display: flex
;
        justify-content: space-between;
        align-items: center;
    }
    .w3-container, .w3-panel{
      padding: 5px;
    }
}
    </style>

<!-- Sidebar -->
{% include "includes/admin_sidebar.html" %}

<!-- Page Content -->
<div class="side-div-section24" >
{% include "includes/admin_topbar.html" %}


  <div class="w3-container">
    <div class="top-das-grap-detai">
        <div class="tdgd-box">
            <div class="tdgd-icon bb"><i style="font-size:24px" class="fa">&#xf240;</i></div>
            <div class="tdgd-content-box">
                <p class="tdgd-con-num">{{ summary.energy_consumed }} kwh</p>
                <p class="tdgd-con-con">Energy Consumed</p>
            </div>
        </div>
        <div class="tdgd-box">
            <div class="tdgd-icon uu"><i class="material-icons">&#xe853;</i></div>
            <div class="tdgd-content-box">
                <p class="tdgd-con-num">{{ summary.users }}</p>
                <p class="tdgd-con-con">Total Users</p>
            </div>
        </div>
        <div class="tdgd-box">
            <div class="tdgd-icon pp"><i style="font-size:24px" class="fa">&#xf1e6;</i></div>
            <div class="tdgd-content-box">
                <p class="tdgd-con-num">{{ summary.energy_saved }} kWh</p>
                <p class="tdgd-con-con">Total Energy Saved</p>
            </div>
        </div>
        <div class="tdgd-box">
            <div class="tdgd-icon ww"><i class="material-icons">&#xe850;</i></div>
            <div class="tdgd-content-box">
                <p class="tdgd-con-num"> € {{ summary.earning }}</p>
                <p class="tdgd-con-con">Earning</p>
            </div>
        </div>
    </div>
<section>
    <div class="graphic-container">

       <div class="graphic-box gg1">
<h3>Trades Per Day (Last 10 Days)</h3>
        <canvas id="dailyChart" style="width:500px"></canvas>
       </div>

       <div class="graphic-box">
<h3>Monthly Earnings (Last 6 Months)</h3>
        <canvas id="monthlyChart" style="width:500px"></canvas>

       </div>
    </div>
        <div class="graphic-container">

       <div class="graphic-box gg1">
<h3>Energy Trade Overview </h3>
<canvas id="comboChart" style="width:100px"></canvas>
       </div>


    </div>
        <div class="graphic-container">

       <div class="graphic-box gg1" style="width:500px; height:500px; padding-bottom:70px">
<h3>Energy Usage </h3>
        <canvas id="energyPie" style="width:500px; height:500px" ></canvas>
       </div>

       <div class="graphic-box">
<h3>Buyers vs Sellers</h3>
        <canvas id="buyersSellersPie" style="width:400px"></canvas>

       </div>
    </div>
</section>





    </div>
</div>


</body>
<script>
            const dailyLabels = {{ daily_trade_labels|safe }};
        const dailyCounts = {{ daily_trade_counts|safe }};
        const monthlyLabels = {{ monthly_earning_labels|safe }};
        const monthlyValues = {{ monthly_earning_values|safe }};

        const ctxDaily = document.getElementById('dailyChart');
        const ctxMonthly = document.getElementById('monthlyChart');
        const ctxEnergyPie = document.getElementById('energyPie');
        const ctxRadar = document.getElementById('summaryRadar');
        const ctxBuyersSellersPie = document.getElementById('buyersSellersPie');

        // Daily Trades Bar Chart
        new Chart(ctxDaily, {
            type: 'bar',
            data: {
                labels: dailyLabels,
                datasets: [{
                    label: 'Trades Per Day',
                    data: dailyCounts,
                    backgroundColor: 'rgba(75, 192, 192, 0.5)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { display: false },
                    title: { display: true, text: 'Daily Trades' }
                }
            }
        });

        // Monthly Earnings Line Chart
        new Chart(ctxMonthly, {
            type: 'line',
            data: {
                labels: monthlyLabels,
                datasets: [{
                    label: 'Monthly Earnings (€)',
                    data: monthlyValues,
                    borderColor: 'rgba(153, 102, 255, 1)',
                    backgroundColor: 'rgba(153, 102, 255, 0.2)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    title: { display: true, text: 'Monthly Earnings' }
                }
            }
        });

        // Energy Usage Pie Chart
        new Chart(ctxEnergyPie, {
            type: 'pie',
            data: {
                labels: ['Energy Consumed', 'Energy Saved'],
                datasets: [{
                    label: 'Energy Overview',
                    data: [{{ summary.energy_consumed }}, {{ summary.energy_saved }}],
                    backgroundColor: ['#ff9f40', '#4bc0c0']
                }]
            },
            options: {
                plugins: {
                    title: { display: true, text: 'Energy Usage Distribution' }
                }
            }
        });

        // Summary Radar Chart
        new Chart(ctxRadar, {
            type: 'radar',
            data: {
                labels: ['Users', 'Energy Consumed', 'Energy Saved', 'Earnings'],
                datasets: [{
                    label: 'System Overview',
                    data: [{{ summary.users }}, {{ summary.energy_consumed }}, {{ summary.energy_saved }}, {{ summary.earning }}],
                    backgroundColor: 'rgba(255, 99, 132, 0.2)',
                    borderColor: 'rgba(255, 99, 132, 1)'
                }]
            },
            options: {
                plugins: {
                    title: { display: true, text: 'Summary Radar' }
                }
            }
        });

        // Buyers vs Sellers Pie Chart
        new Chart(ctxBuyersSellersPie, {
            type: 'pie',
            data: {
                labels: ['Buyers', 'Sellers'],
                datasets: [{
                    label: 'Buyers vs Sellers',
                    data: [{{ unique_buyers }}, {{ unique_sellers }}],
                    backgroundColor: ['#36a2eb', '#ff6384']
                }]
            },
            options: {
                plugins: {
                    title: { display: true, text: 'Buyers vs Sellers' }
                }
            }
        });

        const ctxCombo = document.getElementById('comboChart').getContext('2d');

new Chart(ctxCombo, {
    data: {
        labels: {{ monthly_labels|safe }},
        datasets: [
            {
                type: 'bar',
                label: 'Energy Traded (Value 1)',
                data: {{ monthly_energy_values|safe }},
                backgroundColor: 'rgba(75, 192, 75, 0.7)',  // green bars
                yAxisID: 'y',
            },
            {
                type: 'line',
                label: 'Amount Earned (Value 2)',
                data: {{ monthly_earning_values|safe }},
                borderColor: 'rgba(255, 99, 132, 1)',  // red line
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                fill: false,
                tension: 0.3,
                yAxisID: 'y1',
            }
        ]
    },
    options: {
        responsive: true,
        interaction: {
            mode: 'index',
            intersect: false,
        },
        stacked: false,
        plugins: {
            title: {
                display: true,
                text: 'Energy Trade Overview (Energy and Earnings)'
            }
        },
        scales: {
            y: {
                type: 'linear',
                display: true,
                position: 'left',
                title: {
                    display: true,
                    text: 'Energy Traded'
                },
                beginAtZero: true,
            },
            y1: {
                type: 'linear',
                display: true,
                position: 'right',
                title: {
                    display: true,
                    text: 'Amount Earned (€)'
                },
                grid: {
                    drawOnChartArea: false,
                },
                beginAtZero: true,
            }
        }
    }
});


    </script>

<script src="index.js"></script>
</html>





