<!DOCTYPE html>
{% load static %}
<html>
<title></title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>

<link rel="stylesheet" href="{% static 'index.css' %}">
<body>
    <style>
                .icons56785{
            background-color: rgb(51, 51, 51);
            color: white !important;
            cursor: pointer;
        }
        .gg1 {
    padding: 20px;
    width: 80% !important;
}

.graph-title{
  color: black;
  font-size: 17px;
  font-weight: 600;
}
.earn-content{
  color: rgb(49, 194, 49);
  margin-top: 20px;
  display: flex;
  justify-content: center;
}

.canva-center{
  height: 250px;
  display: flex;
  justify-content: center;
}

.saller-dashboard-sec-section{
  display: flex;
  justify-content: space-between;
  padding: 20px;
  gap: 10px;
}

.sdss-first{
  width:30%;
  border: 1px solid rgba(128, 128, 128, 0.418);
  padding: 20px;
  border-radius: 10px;
}

.energy-saveing-ssdss-first{
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 5px;
}

.this-months-btn{
  background-color: rgb(29, 155, 29);
  color: white;
  padding: 10px 20px;
  border-radius: 5px;
}

.ssdsss-first-image{
  width: 100%;
  padding: 20px;
}

.ssdsss-first-image img{
  width: 100%;
}

.ssdss-first-content{
  text-align: center;
  color: black;
}

.sdss-sec{
  width: 33.33%;
  border: 1px solid rgba(128, 128, 128, 0.418);
  padding: 20px;
  border-radius: 10px;
}

.sdss-sec canvas{
  height: 400px;
}

.sdss-three{
  width: 36.33%;
  border: 1px solid rgba(128, 128, 128, 0.418);
  padding: 10px;
  border-radius: 10px;
}

.rec-trad-sub{
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 20px;
}

.nam-profike{
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.nam-profike img{
  width: 50px;
  height: 50px;
  border-radius: 50%;
  border: 1px solid gray;
  margin-right: 10px;
}

.profile-name p{
  margin: 0px;
}

.sold-btn p{
  background-color: rgb(31, 151, 31);
  padding: 10px;
  color: white;
}

@media screen and (max-width: 790px){
  .gg1 {
    padding: 10px;
    width: 100% !important;
}
.saller-dashboard-sec-section{
  display: block;
}
.sdss-first{
  width: 100%;
  margin-bottom: 10px;
}
.sdss-sec{
  width: 100%;
  margin-bottom: 10px;
}
.sdss-three{
  width: 100%;
}
.saller-dashboard-sec-section{
  padding: 0px;
}
.all-tiel-box-conetn {
        display: flex
;
        justify-content: space-between;
        align-items: center;
    }
    .w3-container, .w3-panel{
      padding: 5px;
    }
}
    </style>

<!-- Sidebar -->
{% include "includes/seller_sidebar.html" %}

<!-- Page Content -->
<div class="side-div-section24" >
  <div class="w3-container w3-teal">
    <div><h1>Logo</h1></div>

    <div class="logo-left-icons">
      <i class="material-icons">&#xe001;</i>
      <i class="material-icons">&#xe1ac;</i>
      <i class="material-icons">&#xe853;</i>
    </div>
    <!-- Hamburger Menu (Visible in mobile view) -->
    <span class="menu-btn">&#9776;</span> <!-- Hamburger Icon -->
  </div>


  <div class="w3-container">
    <div class="top-das-grap-detai">
        <div class="tdgd-box">
            <div class="tdgd-icon bb"><i style="font-size:24px" class="fa">&#xf240;</i></div>
            <div class="tdgd-content-box">

                 <p class="tdgd-con-num"><span id="consumed">--</span> kWh</p>
                <p class="tdgd-con-con">Energy Consumed</p>
            </div>
        </div>
        <div class="tdgd-box">
            <div class="tdgd-icon uu"><i class="material-icons">&#xe853;</i></div>
            <div class="tdgd-content-box">
<!--                <p >2.2k</p>-->
                 <p class="tdgd-con-num"><span id="sold">--</span> kWh</p>
                <p class="tdgd-con-con">Total Energy Sold</p>
            </div>
        </div>
        <div class="tdgd-box">
            <div class="tdgd-icon pp"><i style="font-size:24px" class="fa">&#xf1e6;</i></div>
            <div class="tdgd-content-box">
                <p  class="tdgd-con-num" >{{ user.total_energy_saved }} kWh</p>
                 <p class="tdgd-con-num" style="display:none"><span id="saved">--</span> kWh</p>
                <p class="tdgd-con-con">Total Energy Saved</p>
            </div>
        </div>
        <div class="tdgd-box">
            <div class="tdgd-icon ww"><i class="material-icons">&#xe850;</i></div>
            <div class="tdgd-content-box">
<!--                <p >₹20000</p>-->
                <p class="tdgd-con-num"><span id="earnings">--</span> €</p>
                <p class="tdgd-con-con">Earning</p>

            </div>
        </div>
    </div>

    <div class="graphic-container">
       <section>
    <h2>Weekly Energy Usage</h2>
    <canvas id="weeklyChart" width="500" height="250"></canvas>
  </section>

        <section>
    <h2>Monthly Revenue</h2>
    <canvas id="monthlyChart" width="500" height="250"></canvas>
  </section>
    </div>


   <div class="saller-dashboard-sec-section">
    <div class="sdss-first">
      <div class="energy-saveing-ssdss-first">
        <div><p class="graph-title">Energy Saved</p></div>
        <div class="this-months-btn">This Month</div>
      </div>
      <div class="ssdsss-first-image">
        <img src="https://png.pngtree.com/png-clipart/20241021/original/pngtree-solar-panel-illustration-renewable-energy-clipart-png-image_16441830.png" alt="img">
      </div>
      <div class="ssdss-first-content">
        <p>You have saved 14% energy in this month, which is 4% increased from last month</p>
      </div>

    </div>

  <section>
    <h2>Recent Trades</h2>
    <ul id="tradesList">
      <li>Loading...</li>
    </ul>
  </section>






</div>
      </div>
    </div>


</body>

<script>
  async function loadDashboardData() {
    // Dummy summary data
    const data = {
      summary: {
        energy_consumed: 1200,
        energy_saved: 300,
        energy_sold: 450,
        earnings: 1500
      },
      weekly_energy_usage: {
        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
        consumed: [150, 180, 170, 160, 200, 220, 170],
        saved: [40, 30, 25, 35, 40, 50, 50]
      },
      monthly_revenue: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
        revenue: [100, 200, 150, 300, 250, 400, 350]
      },
      recent_trades: [
        { name: 'John Doe', email: 'john@example.com', trade: 'Sold', amount: '₹1200' },
        { name: 'Jane Smith', email: 'jane@example.com', trade: 'Bought', amount: '₹1500' },
        { name: 'Alex Brown', email: 'alex@example.com', trade: 'Sold', amount: '₹900' }
      ]
    };

    // Summary
    document.getElementById('consumed').textContent = data.summary.energy_consumed;
    document.getElementById('saved').textContent = data.summary.energy_saved;
    document.getElementById('sold').textContent = data.summary.energy_sold;
    document.getElementById('earnings').textContent = data.summary.earnings;

    // Weekly Chart
    const weeklyCtx = document.getElementById('weeklyChart').getContext('2d');
    new Chart(weeklyCtx, {
      type: 'bar',
      data: {
        labels: data.weekly_energy_usage.labels,
        datasets: [
          {
            label: 'Consumed',
            data: data.weekly_energy_usage.consumed,
            backgroundColor: 'rgba(255, 99, 132, 0.6)'
          },
          {
            label: 'Saved',
            data: data.weekly_energy_usage.saved,
            backgroundColor: 'rgba(54, 162, 235, 0.6)'
          }
        ]
      },
      options: {
        responsive: true,
        plugins: {
          legend: {
            position: 'top'
          }
        }
      }
    });

    // Monthly Chart
    const monthlyCtx = document.getElementById('monthlyChart').getContext('2d');
    new Chart(monthlyCtx, {
      type: 'line',
      data: {
        labels: data.monthly_revenue.labels,
        datasets: [{
          label: 'Revenue (€)',
          data: data.monthly_revenue.revenue,
          borderColor: 'rgba(75, 192, 192, 1)',
          fill: false,
          tension: 0.3
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: {
            position: 'top'
          }
        }
      }
    });

    // Recent Trades
    const tradesList = document.getElementById('tradesList');
    tradesList.innerHTML = ''; // Clear existing content

    data.recent_trades.forEach(trade => {
      const tradeCard = document.createElement('div');
      tradeCard.className = 'rec-trad-sub';

      tradeCard.innerHTML = `
        <div class="nam-profike">
          <img src="https://www.shutterstock.com/image-vector/user-profile-icon-vector-avatar-600nw-2220431045.jpg" alt="Profile Picture">
          <div class="profile-name" style="padding-right:50px">
            <p class="pro-name-ssdss-tr">${trade.name}</p>
            <p class="pro-content-ssdss-tr">${trade.email}</p>
          </div>
        </div>
        <div class="sold-btn">
          <p>${trade.trade} - ${trade.amount.replace(/₹/g, '€ ')}</p>
        </div>
      `;

      tradesList.appendChild(tradeCard);
    });
  }

  // Load data on page load
  loadDashboardData();
</script>

<script src="index.js"></script>
</html>
