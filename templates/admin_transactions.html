<!DOCTYPE html>
{% load static %}
<html>
<head>
    <title>Seller Transactions</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CSS -->
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'index.css' %}">

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
</head>
<body>

<!-- Sidebar -->
{% include "includes/admin_sidebar.html" %}

<!-- Page Content -->
<div class="side-div-section24">
    <div class="w3-container w3-teal">
        <div><h1>Logo</h1></div>



        <div class="logo-left-icons">
            <i class="material-icons">&#xe001;</i>
            <i class="material-icons">&#xe1ac;</i>
            <i class="material-icons">&#xe853;</i>
        </div>

        <!-- Hamburger Menu (Visible in mobile view) -->
        <span class="menu-btn">&#9776;</span>
    </div>

    <div class="add-user-page-box">
        <p>Transaction</p>
    </div>

    <div class="transtaion-div">
        <div class="transtion-date-box">
            <p>Sep 9 2025 - Sep 15 2024</p>
        </div>

        <div class="transtion-exp-dow-div">
           <div class="exp-transtion-box">
    <a href="{% url 'export_trades_csv' %}" class="btn btn-success" style="text-decoration: none; color: white;">
        Export CSV
    </a>
</div>


        </div>
    </div>

    <div class="w3-container">
        <table class="section-table table table-striped table-bordered">
            <thead>
                <tr>
                  <th>Trade ID</th>
        <th>Created At</th>
        <th>Buyer</th>
        <th>Seller</th>

        <th>Energy Ask</th>
        <th>Amount</th>

        <th>Type</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
   <tbody>
    {% for trade in trades %}
    <tr>
         <td>{{ trade.id }}</td>

            <td>{{ trade.created_at|date:"Y-m-d H:i:s" }}</td>
            <td>{{ trade.buyer.username }}</td>
            <td>{{ trade.seller.username }}</td>

            <td>{{ trade.proposal.energy_ask }} kWh</td>
            <td> â‚¬ {{ trade.proposal.amount }}</td>

            <td>{{ trade.display_type }}</td>
        <td class="active5678">{{ trade.status }}</td>

        <td class="icons5678">
                     <a href="{% url 'download_invoice' trade.id %}" class="btn btn-primary" target="_blank">
    Download Invoice
  </a>
                </td>
    </tr>
    {% empty %}
    <tr><td colspan="6">No transactions found.</td></tr>
    {% endfor %}
</tbody>
        </table>
    </div>
</div>

<script src="{% static 'index.js' %}"></script>
</body>
</html>
